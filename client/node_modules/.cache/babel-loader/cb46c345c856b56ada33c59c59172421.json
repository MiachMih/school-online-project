{"ast":null,"code":"import _regeneratorRuntime from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{fetchClassesBySubject}from\"../../../store/classes-slice\";import{useDispatch}from\"react-redux\";import{useParams,useSearchParams}from\"react-router-dom\";import DisplayClass from\"./DisplayClass\";import PageList from\"./PagesList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchResults(){var dispatch=useDispatch();var params=useParams();var limit=1;var _useSearchParams=useSearchParams({page:0,limit:limit}),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState=useState(0),_useState2=_slicedToArray(_useState,2),maxPages=_useState2[0],setMaxPages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),displayClasses=_useState4[0],setDisplayClasses=_useState4[1];var pages_list=_toConsumableArray(Array(maxPages).keys());useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchClassesBySubject(params.category,searchParams.toString()));case 2:response=_context.sent;setDisplayClasses(response.result);setMaxPages(parseInt(response.maxPages,10));case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[dispatch,params,searchParams]);return/*#__PURE__*/_jsxs(_Fragment,{children:[displayClasses.map(function(item){return/*#__PURE__*/_jsx(DisplayClass,{result:item},item._id);}),/*#__PURE__*/_jsx(PageList,{currentPage:searchParams.get(\"page\"),pages_list:pages_list,limit:limit,setSearchParams:setSearchParams})]});}export default SearchResults;","map":{"version":3,"names":["React","useEffect","useState","fetchClassesBySubject","useDispatch","useParams","useSearchParams","DisplayClass","PageList","SearchResults","dispatch","params","limit","page","searchParams","setSearchParams","maxPages","setMaxPages","displayClasses","setDisplayClasses","pages_list","Array","keys","fetchData","category","toString","response","result","parseInt","map","item","_id","get"],"sources":["C:/webdev/school/school-online-project/client/src/components/student/add-classes/SearchResults.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { fetchClassesBySubject } from \"../../../store/classes-slice\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport DisplayClass from \"./DisplayClass\";\r\nimport PageList from \"./PagesList\";\r\n\r\nfunction SearchResults() {\r\n  const dispatch = useDispatch();\r\n  const params = useParams();\r\n  const limit = 1;\r\n  const [searchParams, setSearchParams] = useSearchParams({\r\n    page: 0,\r\n    limit: limit,\r\n  });\r\n  const [maxPages, setMaxPages] = useState(0);\r\n  const [displayClasses, setDisplayClasses] = useState([]);\r\n  const pages_list = [...Array(maxPages).keys()];\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const response = await dispatch(\r\n        fetchClassesBySubject(params.category, searchParams.toString())\r\n      );\r\n      setDisplayClasses(response.result);\r\n      setMaxPages(parseInt(response.maxPages, 10));\r\n    }\r\n    fetchData();\r\n  }, [dispatch, params, searchParams]);\r\n\r\n  return (\r\n    <>\r\n      {displayClasses.map((item) => {\r\n        return <DisplayClass key={item._id} result={item} />;\r\n      })}\r\n\r\n      <PageList\r\n        currentPage={searchParams.get(\"page\")}\r\n        pages_list={pages_list}\r\n        limit={limit}\r\n        setSearchParams={setSearchParams}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SearchResults;\r\n"],"mappings":"oiBAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,qBAAT,KAAsC,8BAAtC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,CAAoBC,eAApB,KAA2C,kBAA3C,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA,MAAOC,SAAP,KAAqB,aAArB,C,6IAEA,QAASC,cAAT,EAAyB,CACvB,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,OAAM,CAAGN,SAAS,EAAxB,CACA,GAAMO,MAAK,CAAG,CAAd,CACA,qBAAwCN,eAAe,CAAC,CACtDO,IAAI,CAAE,CADgD,CAEtDD,KAAK,CAAEA,KAF+C,CAAD,CAAvD,sDAAOE,YAAP,sBAAqBC,eAArB,sBAIA,cAAgCb,QAAQ,CAAC,CAAD,CAAxC,wCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAA4Cf,QAAQ,CAAC,EAAD,CAApD,yCAAOgB,cAAP,eAAuBC,iBAAvB,eACA,GAAMC,WAAU,oBAAOC,KAAK,CAACL,QAAD,CAAL,CAAgBM,IAAhB,EAAP,CAAhB,CAEArB,SAAS,CAAC,UAAM,SACCsB,UADD,uIACd,wKACyBb,SAAQ,CAC7BP,qBAAqB,CAACQ,MAAM,CAACa,QAAR,CAAkBV,YAAY,CAACW,QAAb,EAAlB,CADQ,CADjC,QACQC,QADR,eAIEP,iBAAiB,CAACO,QAAQ,CAACC,MAAV,CAAjB,CACAV,WAAW,CAACW,QAAQ,CAACF,QAAQ,CAACV,QAAV,CAAoB,EAApB,CAAT,CAAX,CALF,sDADc,4CAQdO,SAAS,GACV,CATQ,CASN,CAACb,QAAD,CAAWC,MAAX,CAAmBG,YAAnB,CATM,CAAT,CAWA,mBACE,2BACGI,cAAc,CAACW,GAAf,CAAmB,SAACC,IAAD,CAAU,CAC5B,mBAAO,KAAC,YAAD,EAA6B,MAAM,CAAEA,IAArC,EAAmBA,IAAI,CAACC,GAAxB,CAAP,CACD,CAFA,CADH,cAKE,KAAC,QAAD,EACE,WAAW,CAAEjB,YAAY,CAACkB,GAAb,CAAiB,MAAjB,CADf,CAEE,UAAU,CAAEZ,UAFd,CAGE,KAAK,CAAER,KAHT,CAIE,eAAe,CAAEG,eAJnB,EALF,GADF,CAcD,CAED,cAAeN,cAAf"},"metadata":{},"sourceType":"module"}