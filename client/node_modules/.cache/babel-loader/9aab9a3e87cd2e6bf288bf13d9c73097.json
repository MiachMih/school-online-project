{"ast":null,"code":"import _regeneratorRuntime from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Form,{SingleDropdown}from\"../../form/Form\";import{useDispatch}from\"react-redux\";import{fetchClassesNames,fetchClassById}from\"../../../store/classes-slice\";import{jsx as _jsx}from\"react/jsx-runtime\";function Search(props){var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),classNames=_useState2[0],setClassNames=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),classChoice=_useState4[0],setClassChoice=_useState4[1];useEffect(function(){function getClassesNames(){return _getClassesNames.apply(this,arguments);}function _getClassesNames(){_getClassesNames=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchClassesNames());case 2:response=_context.sent;result=response.map(function(item){return{key:item._id,text:item.class_name,value:item._id};});setClassNames(result);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getClassesNames.apply(this,arguments);}getClassesNames();},[]);// TODO: upon submission request data to the server and add data to the searchResults component\nfunction submitHandler(_x){return _submitHandler.apply(this,arguments);}function _submitHandler(){_submitHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return dispatch(fetchClassById({id:classChoice}));case 3:response=_context2.sent;props.setSearchResult(response);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _submitHandler.apply(this,arguments);}function changeHandler(e,_ref){var value=_ref.value;setClassChoice(value);}return/*#__PURE__*/_jsx(Form,{onSubmit:submitHandler,btnName:\"Search\",children:/*#__PURE__*/_jsx(SingleDropdown,{options:classNames,onChange:changeHandler,children:\"Class Name\"})});}export default Search;","map":{"version":3,"names":["React","useEffect","useState","Form","SingleDropdown","useDispatch","fetchClassesNames","fetchClassById","Search","props","dispatch","classNames","setClassNames","classChoice","setClassChoice","getClassesNames","response","result","map","item","key","_id","text","class_name","value","submitHandler","e","preventDefault","id","setSearchResult","changeHandler"],"sources":["C:/webdev/school/school-online-project/client/src/components/teacher/edit-classes/Search.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Form, { SingleDropdown } from \"../../form/Form\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  fetchClassesNames,\r\n  fetchClassById,\r\n} from \"../../../store/classes-slice\";\r\n\r\nfunction Search(props) {\r\n  const dispatch = useDispatch();\r\n  const [classNames, setClassNames] = useState([]);\r\n  const [classChoice, setClassChoice] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    async function getClassesNames() {\r\n      const response = await dispatch(fetchClassesNames());\r\n      const result = response.map((item) => {\r\n        return {\r\n          key: item._id,\r\n          text: item.class_name,\r\n          value: item._id,\r\n        };\r\n      });\r\n      setClassNames(result);\r\n    }\r\n    getClassesNames();\r\n  }, []);\r\n\r\n  // TODO: upon submission request data to the server and add data to the searchResults component\r\n  async function submitHandler(e) {\r\n    e.preventDefault();\r\n    const response = await dispatch(fetchClassById({ id: classChoice }));\r\n    props.setSearchResult(response);\r\n  }\r\n\r\n  function changeHandler(e, { value }) {\r\n    setClassChoice(value);\r\n  }\r\n\r\n  return (\r\n    <Form onSubmit={submitHandler} btnName={\"Search\"}>\r\n      <SingleDropdown options={classNames} onChange={changeHandler}>\r\n        Class Name\r\n      </SingleDropdown>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n"],"mappings":"yZAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,KAAP,EAAeC,cAAf,KAAqC,iBAArC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OACEC,iBADF,CAEEC,cAFF,KAGO,8BAHP,C,2CAKA,QAASC,OAAT,CAAgBC,KAAhB,CAAuB,CACrB,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,cAAoCH,QAAQ,CAAC,EAAD,CAA5C,wCAAOS,UAAP,eAAmBC,aAAnB,eACA,eAAsCV,QAAQ,CAAC,EAAD,CAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eAEAb,SAAS,CAAC,UAAM,SACCc,gBADD,yJACd,+KACyBL,SAAQ,CAACJ,iBAAiB,EAAlB,CADjC,QACQU,QADR,eAEQC,MAFR,CAEiBD,QAAQ,CAACE,GAAT,CAAa,SAACC,IAAD,CAAU,CACpC,MAAO,CACLC,GAAG,CAAED,IAAI,CAACE,GADL,CAELC,IAAI,CAAEH,IAAI,CAACI,UAFN,CAGLC,KAAK,CAAEL,IAAI,CAACE,GAHP,CAAP,CAKD,CANc,CAFjB,CASET,aAAa,CAACK,MAAD,CAAb,CATF,sDADc,kDAYdF,eAAe,GAChB,CAbQ,CAaN,EAbM,CAAT,CAeA;AApBqB,QAqBNU,cArBM,qJAqBrB,kBAA6BC,CAA7B,qIACEA,CAAC,CAACC,cAAF,GADF,uBAEyBjB,SAAQ,CAACH,cAAc,CAAC,CAAEqB,EAAE,CAAEf,WAAN,CAAD,CAAf,CAFjC,QAEQG,QAFR,gBAGEP,KAAK,CAACoB,eAAN,CAAsBb,QAAtB,EAHF,wDArBqB,gDA2BrB,QAASc,cAAT,CAAuBJ,CAAvB,MAAqC,IAATF,MAAS,MAATA,KAAS,CACnCV,cAAc,CAACU,KAAD,CAAd,CACD,CAED,mBACE,KAAC,IAAD,EAAM,QAAQ,CAAEC,aAAhB,CAA+B,OAAO,CAAE,QAAxC,uBACE,KAAC,cAAD,EAAgB,OAAO,CAAEd,UAAzB,CAAqC,QAAQ,CAAEmB,aAA/C,wBADF,EADF,CAOD,CAED,cAAetB,OAAf"},"metadata":{},"sourceType":"module"}