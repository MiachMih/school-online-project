{"ast":null,"code":"import _regeneratorRuntime from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import DisplayAnnouncements from\"./DisplayAnnouncements\";import Loader from\"../../form/Loader\";import{getAnnouncements}from\"../../../store/announcement-slice\";import InfiniteScroll from\"react-infinite-scroller\";import{Container}from\"../../form/Form\";import{jsx as _jsx}from\"react/jsx-runtime\";function MakeScroll(_ref){var limit=_ref.limit,maxPages=_ref.maxPages;var dispatch=useDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];function fetchAnnouncements(){return _fetchAnnouncements.apply(this,arguments);}function _fetchAnnouncements(){_fetchAnnouncements=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(getAnnouncements(\"page=\".concat(page,\"&limit=\").concat(limit)));case 2:response=_context.sent;// console.log(data);\nsetData(function(state){return[].concat(_toConsumableArray(state),_toConsumableArray(response));});setPage(function(state){return state+1;});case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchAnnouncements.apply(this,arguments);}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(InfiniteScroll,{pageStart:page,hasMore:page<maxPages,loadMore:fetchAnnouncements,initialLoad:true,loader:/*#__PURE__*/_jsx(Loader,{}),threshold:50,children:/*#__PURE__*/_jsx(DisplayAnnouncements,{announcements:data})})});}export default MakeScroll;","map":{"version":3,"names":["React","useState","useDispatch","DisplayAnnouncements","Loader","getAnnouncements","InfiniteScroll","Container","MakeScroll","limit","maxPages","dispatch","page","setPage","data","setData","fetchAnnouncements","response","state"],"sources":["C:/webdev/school/school-online-project/client/src/components/student/announcement/MakeScroll.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport DisplayAnnouncements from \"./DisplayAnnouncements\";\r\nimport Loader from \"../../form/Loader\";\r\nimport { getAnnouncements } from \"../../../store/announcement-slice\";\r\nimport InfiniteScroll from \"react-infinite-scroller\";\r\nimport { Container } from \"../../form/Form\";\r\n\r\nfunction MakeScroll({ limit, maxPages }) {\r\n  const dispatch = useDispatch();\r\n  const [page, setPage] = useState(0);\r\n  const [data, setData] = useState([]);\r\n\r\n  async function fetchAnnouncements() {\r\n    const response = await dispatch(\r\n      getAnnouncements(`page=${page}&limit=${limit}`)\r\n    );\r\n\r\n    // console.log(data);\r\n\r\n    setData((state) => {\r\n      return [...state, ...response];\r\n    });\r\n    setPage((state) => {\r\n      return state + 1;\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <InfiniteScroll\r\n        pageStart={page}\r\n        hasMore={page < maxPages}\r\n        loadMore={fetchAnnouncements}\r\n        initialLoad={true}\r\n        loader={<Loader />}\r\n        threshold={50}\r\n      >\r\n        <DisplayAnnouncements announcements={data} />\r\n      </InfiniteScroll>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default MakeScroll;\r\n"],"mappings":"oiBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,qBAAP,KAAiC,wBAAjC,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,OAASC,gBAAT,KAAiC,mCAAjC,CACA,MAAOC,eAAP,KAA2B,yBAA3B,CACA,OAASC,SAAT,KAA0B,iBAA1B,C,2CAEA,QAASC,WAAT,MAAyC,IAAnBC,MAAmB,MAAnBA,KAAmB,CAAZC,QAAY,MAAZA,QAAY,CACvC,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CACA,cAAwBD,QAAQ,CAAC,CAAD,CAAhC,wCAAOW,IAAP,eAAaC,OAAb,eACA,eAAwBZ,QAAQ,CAAC,EAAD,CAAhC,yCAAOa,IAAP,eAAaC,OAAb,eAHuC,QAKxBC,mBALwB,kKAKvC,wKACyBL,SAAQ,CAC7BN,gBAAgB,gBAASO,IAAT,mBAAuBH,KAAvB,EADa,CADjC,QACQQ,QADR,eAKE;AAEAF,OAAO,CAAC,SAACG,KAAD,CAAW,CACjB,mCAAWA,KAAX,qBAAqBD,QAArB,GACD,CAFM,CAAP,CAGAJ,OAAO,CAAC,SAACK,KAAD,CAAW,CACjB,MAAOA,MAAK,CAAG,CAAf,CACD,CAFM,CAAP,CAVF,sDALuC,qDAoBvC,mBACE,KAAC,SAAD,wBACE,KAAC,cAAD,EACE,SAAS,CAAEN,IADb,CAEE,OAAO,CAAEA,IAAI,CAAGF,QAFlB,CAGE,QAAQ,CAAEM,kBAHZ,CAIE,WAAW,CAAE,IAJf,CAKE,MAAM,cAAE,KAAC,MAAD,IALV,CAME,SAAS,CAAE,EANb,uBAQE,KAAC,oBAAD,EAAsB,aAAa,CAAEF,IAArC,EARF,EADF,EADF,CAcD,CAED,cAAeN,WAAf"},"metadata":{},"sourceType":"module"}