{"ast":null,"code":"import _defineProperty from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useState,useEffect}from\"react\";import styles from\"./Login.module.css\";import styled from\"styled-components\";import bg from\"../../assets/galaxy-night-view.jpg\";import{Link,useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{loginStudent,validate}from\"../../store/student-slice\";import{loginTeacher}from\"../../store/teacher-slice\";import Form,{Email,Password,Title}from\"../form/Form\";//TODO: fetch the background image from an API\n// and render Loading screen while waiting for the picture\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-image: url(\",\");\\n  height: 100vh;\\n  width: 100vw;\\n  background-size: cover;\\n  background-position: center;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])),function(props){return props.bg;});function Login(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),loginData=_useState2[0],setLoginData=_useState2[1];var isLoading=useSelector(function(state){return state.user.loading;});var navigate=useNavigate();var dispatch=useDispatch();var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isStudentTeacher=_useState4[0],setIsStudentTeacher=_useState4[1];useEffect(function(){dispatch(validate(navigate));},[dispatch,navigate]);function submitHandler(e){e.preventDefault();if(isStudentTeacher){dispatch(loginStudent(loginData,navigate));}else{dispatch(loginTeacher(loginData,navigate));}}function changeHandler(e){return setLoginData(_objectSpread(_objectSpread({},loginData),{},_defineProperty({},e.target.name,e.target.value)));}if(isLoading){return/*#__PURE__*/_jsx(_Fragment,{children:\"...Loading\"});}return/*#__PURE__*/_jsx(Container,{bg:bg,children:/*#__PURE__*/_jsxs(\"div\",{id:\"hi\",className:styles.content,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.btn,onClick:function onClick(){setIsStudentTeacher(function(state){return!state;});},children:\"Switch\"}),isStudentTeacher?/*#__PURE__*/_jsx(Title,{children:\"Student Login\"}):/*#__PURE__*/_jsx(Title,{children:\"Teacher Login\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,btnName:\"Login\",children:[/*#__PURE__*/_jsx(Email,{onChange:changeHandler,name:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Password,{onChange:changeHandler,name:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.links,children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:styles.link,children:\"New User\"})})]})]})});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","styles","styled","bg","Link","useNavigate","useDispatch","useSelector","loginStudent","validate","loginTeacher","Form","Email","Password","Title","Container","div","props","Login","loginData","setLoginData","isLoading","state","user","loading","navigate","dispatch","isStudentTeacher","setIsStudentTeacher","submitHandler","e","preventDefault","changeHandler","target","name","value","content","btn","links","link"],"sources":["C:/webdev/school/school-online-project/client/src/components/login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styles from \"./Login.module.css\";\r\nimport styled from \"styled-components\";\r\nimport bg from \"../../assets/galaxy-night-view.jpg\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginStudent, validate } from \"../../store/student-slice\";\r\nimport { loginTeacher } from \"../../store/teacher-slice\";\r\nimport Form, { Email, Password, Title } from \"../form/Form\";\r\n\r\n//TODO: fetch the background image from an API\r\n// and render Loading screen while waiting for the picture\r\nconst Container = styled.div`\r\n  background-image: url(${(props) => props.bg});\r\n  height: 100vh;\r\n  width: 100vw;\r\n  background-size: cover;\r\n  background-position: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nfunction Login() {\r\n  const [loginData, setLoginData] = useState({});\r\n  const isLoading = useSelector((state) => state.user.loading);\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [isStudentTeacher, setIsStudentTeacher] = useState(true);\r\n\r\n  useEffect(() => {\r\n    dispatch(validate(navigate));\r\n  }, [dispatch, navigate]);\r\n\r\n  function submitHandler(e) {\r\n    e.preventDefault();\r\n    if (isStudentTeacher) {\r\n      dispatch(loginStudent(loginData, navigate));\r\n    } else {\r\n      dispatch(loginTeacher(loginData, navigate));\r\n    }\r\n  }\r\n\r\n  function changeHandler(e) {\r\n    return setLoginData({ ...loginData, [e.target.name]: e.target.value });\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <>...Loading</>;\r\n  }\r\n\r\n  return (\r\n    <Container bg={bg}>\r\n      <div id=\"hi\" className={styles.content}>\r\n        <button\r\n          className={styles.btn}\r\n          onClick={() => {\r\n            setIsStudentTeacher((state) => !state);\r\n          }}\r\n        >\r\n          Switch\r\n        </button>\r\n        {isStudentTeacher ? (\r\n          <Title>Student Login</Title>\r\n        ) : (\r\n          <Title>Teacher Login</Title>\r\n        )}\r\n        <Form onSubmit={submitHandler} btnName=\"Login\">\r\n          <Email onChange={changeHandler} name=\"email\">\r\n            Email\r\n          </Email>\r\n          <Password onChange={changeHandler} name=\"password\">\r\n            Password\r\n          </Password>\r\n\r\n          <div className={styles.links}>\r\n            {/* <a href=\"#hi\" className={styles.link}>\r\n              Forgot password\r\n            </a> */}\r\n            <Link to=\"/signup\" className={styles.link}>\r\n              New User\r\n            </Link>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"ijBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,OAAP,KAAmB,oBAAnB,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,MAAOC,GAAP,KAAe,oCAAf,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,YAAT,CAAuBC,QAAvB,KAAuC,2BAAvC,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,MAAOC,KAAP,EAAeC,KAAf,CAAsBC,QAAtB,CAAgCC,KAAhC,KAA6C,cAA7C,CAEA;AACA;6IACA,GAAMC,UAAS,CAAGb,MAAM,CAACc,GAAV,sQACW,SAACC,KAAD,QAAWA,MAAK,CAACd,EAAjB,EADX,CAAf,CAWA,QAASe,MAAT,EAAiB,CACf,cAAkCnB,QAAQ,CAAC,EAAD,CAA1C,wCAAOoB,SAAP,eAAkBC,YAAlB,eACA,GAAMC,UAAS,CAAGd,WAAW,CAAC,SAACe,KAAD,QAAWA,MAAK,CAACC,IAAN,CAAWC,OAAtB,EAAD,CAA7B,CACA,GAAMC,SAAQ,CAAGpB,WAAW,EAA5B,CACA,GAAMqB,SAAQ,CAAGpB,WAAW,EAA5B,CACA,eAAgDP,QAAQ,CAAC,IAAD,CAAxD,yCAAO4B,gBAAP,eAAyBC,mBAAzB,eAEA5B,SAAS,CAAC,UAAM,CACd0B,QAAQ,CAACjB,QAAQ,CAACgB,QAAD,CAAT,CAAR,CACD,CAFQ,CAEN,CAACC,QAAD,CAAWD,QAAX,CAFM,CAAT,CAIA,QAASI,cAAT,CAAuBC,CAAvB,CAA0B,CACxBA,CAAC,CAACC,cAAF,GACA,GAAIJ,gBAAJ,CAAsB,CACpBD,QAAQ,CAAClB,YAAY,CAACW,SAAD,CAAYM,QAAZ,CAAb,CAAR,CACD,CAFD,IAEO,CACLC,QAAQ,CAAChB,YAAY,CAACS,SAAD,CAAYM,QAAZ,CAAb,CAAR,CACD,CACF,CAED,QAASO,cAAT,CAAuBF,CAAvB,CAA0B,CACxB,MAAOV,aAAY,gCAAMD,SAAN,wBAAkBW,CAAC,CAACG,MAAF,CAASC,IAA3B,CAAkCJ,CAAC,CAACG,MAAF,CAASE,KAA3C,GAAnB,CACD,CAED,GAAId,SAAJ,CAAe,CACb,mBAAO,uCAAP,CACD,CAED,mBACE,KAAC,SAAD,EAAW,EAAE,CAAElB,EAAf,uBACE,aAAK,EAAE,CAAC,IAAR,CAAa,SAAS,CAAEF,MAAM,CAACmC,OAA/B,wBACE,eACE,SAAS,CAAEnC,MAAM,CAACoC,GADpB,CAEE,OAAO,CAAE,kBAAM,CACbT,mBAAmB,CAAC,SAACN,KAAD,QAAW,CAACA,KAAZ,EAAD,CAAnB,CACD,CAJH,oBADF,CASGK,gBAAgB,cACf,KAAC,KAAD,4BADe,cAGf,KAAC,KAAD,4BAZJ,cAcE,MAAC,IAAD,EAAM,QAAQ,CAAEE,aAAhB,CAA+B,OAAO,CAAC,OAAvC,wBACE,KAAC,KAAD,EAAO,QAAQ,CAAEG,aAAjB,CAAgC,IAAI,CAAC,OAArC,mBADF,cAIE,KAAC,QAAD,EAAU,QAAQ,CAAEA,aAApB,CAAmC,IAAI,CAAC,UAAxC,sBAJF,cAQE,YAAK,SAAS,CAAE/B,MAAM,CAACqC,KAAvB,uBAIE,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAErC,MAAM,CAACsC,IAArC,sBAJF,EARF,GAdF,GADF,EADF,CAoCD,CAED,cAAerB,MAAf"},"metadata":{},"sourceType":"module"}