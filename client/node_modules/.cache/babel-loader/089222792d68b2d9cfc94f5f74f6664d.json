{"ast":null,"code":"import _regeneratorRuntime from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/webdev/school/school-online-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{loadStripe}from\"@stripe/stripe-js\";import{Elements}from\"@stripe/react-stripe-js\";import CheckoutForm from\"./CheckoutForm\";import Options from\"./Options\";import{useDispatch}from\"react-redux\";import{getClientSecret}from\"../../../store/payment-slice\";import styles from\"./Billing.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var stripePromise=loadStripe(\"pk_test_51LtxpNHQOPdk7PQDqFPUYjcLc4vv5KToalPosCCV7i9W8bipXjXSY7e6kZHqop2Am1uDqLrH8eSWeaKIqhzbcjkv00t3sLIhzP\");function Billing(){var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),clientSecret=_useState2[0],setClientSecret=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),amount=_useState4[0],setAmount=_useState4[1];useEffect(function(){function fetchClientSecret(){return _fetchClientSecret.apply(this,arguments);}function _fetchClientSecret(){_fetchClientSecret=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(getClientSecret({amount:amount*100}));case 2:response=_context.sent;setClientSecret(response);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchClientSecret.apply(this,arguments);}fetchClientSecret();},[amount]);var appearance={theme:\"stripe\"};var options={clientSecret:clientSecret,appearance:appearance};return/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.Billing,children:[/*#__PURE__*/_jsx(Options,{setAmount:setAmount,currentFocus:amount}),clientSecret&&/*#__PURE__*/_jsx(Elements,{options:options,stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})},clientSecret)]})});}export default Billing;","map":{"version":3,"names":["React","useState","useEffect","loadStripe","Elements","CheckoutForm","Options","useDispatch","getClientSecret","styles","stripePromise","Billing","dispatch","clientSecret","setClientSecret","amount","setAmount","fetchClientSecret","response","appearance","theme","options","container"],"sources":["C:/webdev/school/school-online-project/client/src/components/student/billing/Billing.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\nimport Options from \"./Options\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getClientSecret } from \"../../../store/payment-slice\";\r\nimport styles from \"./Billing.module.css\";\r\n\r\nconst stripePromise = loadStripe(\r\n  \"pk_test_51LtxpNHQOPdk7PQDqFPUYjcLc4vv5KToalPosCCV7i9W8bipXjXSY7e6kZHqop2Am1uDqLrH8eSWeaKIqhzbcjkv00t3sLIhzP\"\r\n);\r\n\r\nfunction Billing() {\r\n  const dispatch = useDispatch();\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const [amount, setAmount] = useState(1);\r\n\r\n  useEffect(() => {\r\n    async function fetchClientSecret() {\r\n      const response = await dispatch(\r\n        getClientSecret({ amount: amount * 100 })\r\n      );\r\n      setClientSecret(response);\r\n    }\r\n    fetchClientSecret();\r\n  }, [amount]);\r\n\r\n  const appearance = {\r\n    theme: \"stripe\",\r\n  };\r\n  const options = {\r\n    clientSecret,\r\n    appearance,\r\n  };\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.Billing}>\r\n        <Options setAmount={setAmount} currentFocus={amount} />\r\n        {clientSecret && (\r\n          <Elements key={clientSecret} options={options} stripe={stripePromise}>\r\n            <CheckoutForm />\r\n          </Elements>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Billing;\r\n"],"mappings":"yZAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,eAAT,KAAgC,8BAAhC,CACA,MAAOC,OAAP,KAAmB,sBAAnB,C,wFAEA,GAAMC,cAAa,CAAGP,UAAU,CAC9B,6GAD8B,CAAhC,CAIA,QAASQ,QAAT,EAAmB,CACjB,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,cAAwCN,QAAQ,CAAC,EAAD,CAAhD,wCAAOY,YAAP,eAAqBC,eAArB,eACA,eAA4Bb,QAAQ,CAAC,CAAD,CAApC,yCAAOc,MAAP,eAAeC,SAAf,eAEAd,SAAS,CAAC,UAAM,SACCe,kBADD,+JACd,wKACyBL,SAAQ,CAC7BJ,eAAe,CAAC,CAAEO,MAAM,CAAEA,MAAM,CAAG,GAAnB,CAAD,CADc,CADjC,QACQG,QADR,eAIEJ,eAAe,CAACI,QAAD,CAAf,CAJF,sDADc,oDAOdD,iBAAiB,GAClB,CARQ,CAQN,CAACF,MAAD,CARM,CAAT,CAUA,GAAMI,WAAU,CAAG,CACjBC,KAAK,CAAE,QADU,CAAnB,CAGA,GAAMC,QAAO,CAAG,CACdR,YAAY,CAAZA,YADc,CAEdM,UAAU,CAAVA,UAFc,CAAhB,CAIA,mBACE,YAAK,SAAS,CAAEV,MAAM,CAACa,SAAvB,uBACE,aAAK,SAAS,CAAEb,MAAM,CAACE,OAAvB,wBACE,KAAC,OAAD,EAAS,SAAS,CAAEK,SAApB,CAA+B,YAAY,CAAED,MAA7C,EADF,CAEGF,YAAY,eACX,KAAC,QAAD,EAA6B,OAAO,CAAEQ,OAAtC,CAA+C,MAAM,CAAEX,aAAvD,uBACE,KAAC,YAAD,IADF,EAAeG,YAAf,CAHJ,GADF,EADF,CAYD,CAED,cAAeF,QAAf"},"metadata":{},"sourceType":"module"}